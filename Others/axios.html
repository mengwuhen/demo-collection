<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>axios</title>
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>
	
	<div id="test">
	</div>

	<button id="test2" onclick="onBtnClick()">click</button>
	<script>
		var data ,len

		function onBtnClick() {
			console.warn('shijie')
			for(let i=0 ; i< len; i++){
				document.getElementById('test').innerHTML = data[i].content
			}
		}

		window.onload = function () {

			let config = {
				// `url` 是用于请求的服务器 URL
				url: '/topics',

				  // `method` 是创建请求时使用的方法
				  method: 'get', // 默认是 get
				  // `baseURL` 将自动加在 `url` 前面，除非 `url` 是一个绝对 URL。
				  // 它可以通过设置一个 `baseURL` 便于为 axios 实例的方法传递相对 URL
				  baseURL: 'https://cnodejs.org/api/v1',

				  // `headers` 是即将被发送的自定义请求头
				  headers: {'X-Requested-With': 'XMLHttpRequest'},

				  // `params` 是即将与请求一起发送的 URL 参数
				  // 必须是一个无格式对象(plain object)或 URLSearchParams 对象
				  params: {
				  	limit:10
				  },
			}

			axios(config)
			.then(res => {
				if(res.status == 200 && res.statusText == 'OK') {
					return res.data
				}
			})
			.catch(function (error) {
				console.log(error);
			})
			.then(res => {
				len = res.data.length
				data = res.data
			})

}

			

</script>
</body>
</html>