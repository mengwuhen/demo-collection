<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>echarts</title>
	<script src='../package/echarts.js'></script>
	<script src='../package/jquery-3.3.1.js'></script>
	<script src='../package/dataTool.js'></script>

	<style>
		#main{
			margin: 0 auto;
		}
	</style>
</head>
<body>
	
	<div id="main" style="width: 1200px;height:800px;"></div>

	<script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));


        // app.title = '力引导布局';

        myChart.showLoading();


        $.get('data/assets/data/data.gexf', function (xml) {
        	myChart.hideLoading();
        	var graph = echarts.dataTool.gexf.parse(xml);
        	var categories = [];
        	for (var i = 0; i < 9; i++) {
        		categories[i] = {
        			name: '类目' + i
        		};
        	}

        	graph.nodes.forEach(function (node) {
        		node.itemStyle = null;
        		node.symbolSize = 10;
        		node.value = node.symbolSize;
        		node.category = node.attributes.modularity_class;
        		node.x = node.y = null;
        		node.draggable = true;
        	});

        	option = {
        		backgroundColor: '#fff',
        		title: {
        			text: 'Les Miserables',
        			subtext: 'Default layout',
        			x: 'center',
        			y: 'top',
        			textAlign: 'center',
        			itemGap: 15,
        			padding: 15,
        			borderColor: 'red',
        		},
        		tooltip: {},
        		legend: [{
        			data: categories.map(function (a) {
        				return a.name;
        			})
        		}],
        		animation: true,
        		series : [
        		{
        			name: '',
        			type: 'graph',
        			layout: 'force',
        			data: graph.nodes,
        			links: graph.links,
        			categories: categories,
        			roam: true,
        			label: {
        				normal: {
        					position: 'left'
        				}
        			},
        			force: {
        				repulsion: 100
        			},
        			itemStyle: {
        				normal: {
        					label: {
        						show: true
        					},
        					nodeStyle : {
        						brushType : 'both',
        						borderColor : 'rgba(255,215,0,0.6)',
        						borderWidth : 1
        					}
        				}
        			},
        		}
        		],

        	};

        	myChart.setOption(option);
        }, 'xml');
    </script>
</body>
</html>