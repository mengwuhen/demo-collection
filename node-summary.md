### Node 中的 中间件
* 中间件 在 Node.js 中被广泛使用，它泛指一种特定的设计模式、一系列的处理单元、过滤器和处理程序，以函数的形式存在，连接在一起，形成一个异步队列，来完成对任何数据的预处理和后处理。它的优点在于 灵活性：使用中间件我们用极少的操作就能得到一个插件，用最简单的方法就能将新的过滤器和处理程序扩展到现有的系统上。
要实现中间件模式，最重要的实现细节是：
>可以通过调用use()函数来注册新的中间件，通常，新的中间件只能被添加到高压包带的末端，但不是严格要求这么做；
>当接收到需要处理的新数据时，注册的中间件在意不执行流程中被依次调用。
>每个中间件都接受上一个中间件的执行结果作为输入值；
>每个中间件都可以停止数据的进一步处理，只需要简单地不调用它的毁掉函数或者将错误传递给回调函数。当发生错误时，通常会触发执行另一个专门处理错误的中间件。
```js
    exports.blockUser = function () {
        return function (req, res, next) {
            if (req.path === '/signout') {
            return next();
            }

            if (req.session.user && req.session.user.is_block && req.method !== 'GET') {
            return res.status(403).send('您已被管理员屏蔽了。有疑问请联系 @alsotang。');
            }
            next();
        };
    };
```

